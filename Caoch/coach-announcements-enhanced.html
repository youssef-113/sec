<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Announcements - Al Ahly SC Coach Portal</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="coach.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Enhanced Announcements Styles */
        .announcements-content {
            padding: var(--spacing-xl);
            flex: 1;
        }

        .announcements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            flex-wrap: wrap;
            gap: var(--spacing);
        }

        .announcements-title {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .announcements-title h1 {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            color: var(--gray-900);
        }

        .announcements-title p {
            font-size: var(--font-size-base);
            color: var(--gray-600);
        }

        .announcements-actions {
            display: flex;
            gap: var(--spacing);
            align-items: center;
        }

        .filter-controls {
            display: flex;
            gap: var(--spacing);
            margin-bottom: var(--spacing-xl);
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .filter-group label {
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--gray-700);
        }

        .filter-select {
            padding: var(--spacing-sm) var(--spacing);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius);
            font-size: var(--font-size-sm);
            background-color: var(--primary-white);
            min-width: 120px;
        }

        .search-container {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) 2.5rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius);
            font-size: var(--font-size-sm);
        }

        .search-icon {
            position: absolute;
            left: var(--spacing);
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-400);
        }

        .announcements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .announcement-card {
            background: var(--primary-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--gray-200);
            overflow: hidden;
            transition: var(--transition);
            position: relative;
        }

        .announcement-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .announcement-card.priority-high {
            border-left: 4px solid var(--error);
        }

        .announcement-card.priority-medium {
            border-left: 4px solid var(--warning);
        }

        .announcement-card.priority-low {
            border-left: 4px solid var(--info);
        }

        .announcement-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--gray-200);
        }

        .announcement-meta {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing);
        }

        .announcement-category {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .category-training {
            background-color: #f0f9ff;
            color: #0369a1;
        }

        .category-match {
            background-color: #fef3c7;
            color: #d97706;
        }

        .category-general {
            background-color: #f3f4f6;
            color: #374151;
        }

        .category-emergency {
            background-color: #fef2f2;
            color: #dc2626;
        }

        .announcement-priority {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-size-xs);
            font-weight: 500;
        }

        .priority-high {
            color: var(--error);
        }

        .priority-medium {
            color: var(--warning);
        }

        .priority-low {
            color: var(--info);
        }

        .announcement-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--spacing-sm);
            line-height: 1.4;
        }

        .announcement-excerpt {
            font-size: var(--font-size-sm);
            color: var(--gray-600);
            line-height: 1.5;
            margin-bottom: var(--spacing);
        }

        .announcement-footer {
            padding: var(--spacing);
            background-color: var(--gray-50);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .announcement-info {
            display: flex;
            align-items: center;
            gap: var(--spacing);
            font-size: var(--font-size-xs);
            color: var(--gray-500);
        }

        .announcement-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .action-btn {
            background: none;
            border: none;
            padding: var(--spacing-sm);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray-500);
        }

        .action-btn:hover {
            background-color: var(--gray-200);
            color: var(--primary-red);
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .stat-card {
            background: var(--primary-white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            gap: var(--spacing);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-lg);
            color: var(--primary-white);
        }

        .stat-icon.total {
            background: linear-gradient(135deg, var(--primary-red), var(--dark-red));
        }

        .stat-icon.active {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .stat-icon.scheduled {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .stat-icon.views {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .stat-info h3 {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 2px;
        }

        .stat-info p {
            font-size: var(--font-size-sm);
            color: var(--gray-600);
        }

        /* Modal Styles */
        .modal-large {
            max-width: 800px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing);
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .rich-editor {
            min-height: 200px;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius);
            padding: var(--spacing);
            font-family: inherit;
            resize: vertical;
        }

        .target-audience {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-sm);
        }

        .audience-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background-color: var(--light-red);
            color: var(--primary-red);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 500;
        }

        .audience-tag .remove {
            cursor: pointer;
            font-weight: 700;
        }

        .file-upload {
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius);
            padding: var(--spacing-xl);
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: var(--primary-red);
            background-color: var(--light-red);
        }

        .file-upload.dragover {
            border-color: var(--primary-red);
            background-color: var(--light-red);
        }

        .empty-state {
            text-align: center;
            padding: var(--spacing-2xl);
            color: var(--gray-500);
        }

        .empty-state i {
            font-size: var(--font-size-4xl);
            margin-bottom: var(--spacing);
            color: var(--gray-400);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .announcements-content {
                padding: var(--spacing);
            }

            .announcements-header {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }

            .announcements-grid {
                grid-template-columns: 1fr;
            }

            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .stats-overview {
                grid-template-columns: 1fr;
            }

            .announcement-meta {
                flex-direction: column;
                gap: var(--spacing-sm);
            }

            .announcement-footer {
                flex-direction: column;
                gap: var(--spacing-sm);
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="7AhhubHgCAYu.jpg" alt="Al Ahly SC" class="sidebar-logo">
                <div class="sidebar-title">
                    <h3>Al Ahly SC</h3>
                    <p>Coach Portal</p>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h4>OVERVIEW</h4>
                    <ul>
                        <li><a href="coach-dashboard.html" class="nav-link"><i class="fas fa-home"></i> Dashboard</a></li>
                        <li><a href="coach-analytics.html" class="nav-link"><i class="fas fa-chart-bar"></i> My Analytics</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h4>TEAM MANAGEMENT</h4>
                    <ul>
                        <li><a href="coach-team.html" class="nav-link"><i class="fas fa-users"></i> My Team</a></li>
                        <li><a href="coach-schedule-enhanced.html" class="nav-link"><i class="fas fa-calendar-alt"></i> Schedule</a></li>
                        <li><a href="drills.html" class="nav-link"><i class="fas fa-dumbbell"></i> Drill Library</a></li>
                        <li><a href="coach-players-enhanced.html" class="nav-link"><i class="fas fa-user-friends"></i> My Players</a></li>
                        <li><a href="coach-attendance.html" class="nav-link"><i class="fas fa-clipboard-check"></i> Attendance</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h4>TRAINING</h4>
                    <ul>
                        <li><a href="coach-sessions.html" class="nav-link"><i class="fas fa-play-circle"></i> Training Sessions</a></li>
                        <li><a href="coach-performance.html" class="nav-link"><i class="fas fa-chart-line"></i> Performance</a></li>
                        <li><a href="coach-matches-enhanced.html" class="nav-link"><i class="fas fa-trophy"></i> Matches</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h4>COMMUNICATION</h4>
                    <ul>
                        <li><a href="coach-announcements-enhanced.html" class="nav-link active"><i class="fas fa-bullhorn"></i> Announcements</a></li>
                        <li><a href="coach-chat-enhanced.html" class="nav-link"><i class="fas fa-comments"></i> Team Chat</a></li>
                        <li><a href="coach-feedback.html" class="nav-link"><i class="fas fa-star"></i> Player Feedback</a></li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face" alt="User" class="user-avatar">
                    <div class="user-info">
                        <span class="user-name">Ahmed Hassan</span>
                        <span class="user-role">Football Coach</span>
                    </div>
                    <div class="user-menu">
                        <i class="fas fa-chevron-down"></i>
                        <div class="dropdown-menu">
                            <a href="coach-profile.html"><i class="fas fa-user"></i> Profile</a>
                            <a href="coach-settings.html"><i class="fas fa-cog"></i> Settings</a>
                            <a href="index.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="header-left">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="announcements-title">
                        <h1>Team Announcements</h1>
                        <p>Create and manage announcements for your team</p>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn-outline" onclick="exportAnnouncements()">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                    <button class="btn-primary" onclick="openModal('new-announcement-modal')">
                        <i class="fas fa-plus"></i>
                        New Announcement
                    </button>
                    <div class="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                </div>
            </header>
            
            <div class="announcements-content">
                <!-- Stats Overview -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon total">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <div class="stat-info">
                            <h3>24</h3>
                            <p>Total Announcements</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon active">
                            <i class="fas fa-broadcast-tower"></i>
                        </div>
                        <div class="stat-info">
                            <h3>8</h3>
                            <p>Active Announcements</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon scheduled">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>3</h3>
                            <p>Scheduled</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon views">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-info">
                            <h3>1,247</h3>
                            <p>Total Views</p>
                        </div>
                    </div>
                </div>
                
                <!-- Filter Controls -->
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="category-filter">Category:</label>
                        <select id="category-filter" class="filter-select">
                            <option value="">All Categories</option>
                            <option value="training">Training</option>
                            <option value="match">Match</option>
                            <option value="general">General</option>
                            <option value="emergency">Emergency</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="priority-filter">Priority:</label>
                        <select id="priority-filter" class="filter-select">
                            <option value="">All Priorities</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="status-filter">Status:</label>
                        <select id="status-filter" class="filter-select">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="scheduled">Scheduled</option>
                            <option value="expired">Expired</option>
                        </select>
                    </div>
                    
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="search-input" class="search-input" placeholder="Search announcements...">
                    </div>
                </div>
                
                <!-- Announcements Grid -->
                <div class="announcements-grid" id="announcements-grid">
                    <!-- Announcements will be populated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <!-- New Announcement Modal -->
    <div id="new-announcement-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Create New Announcement</h3>
                <button class="close" onclick="closeModal('new-announcement-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="announcement-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="announcement-title">Title *</label>
                            <input type="text" id="announcement-title" name="title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="announcement-category">Category *</label>
                            <select id="announcement-category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="training">Training</option>
                                <option value="match">Match</option>
                                <option value="general">General</option>
                                <option value="emergency">Emergency</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="announcement-priority">Priority *</label>
                            <select id="announcement-priority" name="priority" required>
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="announcement-audience">Target Audience</label>
                            <select id="announcement-audience" name="audience">
                                <option value="all">All Players</option>
                                <option value="goalkeepers">Goalkeepers</option>
                                <option value="defenders">Defenders</option>
                                <option value="midfielders">Midfielders</option>
                                <option value="forwards">Forwards</option>
                                <option value="custom">Custom Selection</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="publish-date">Publish Date</label>
                            <input type="datetime-local" id="publish-date" name="publishDate">
                        </div>
                        
                        <div class="form-group">
                            <label for="expiry-date">Expiry Date</label>
                            <input type="datetime-local" id="expiry-date" name="expiryDate">
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="announcement-content">Content *</label>
                            <textarea id="announcement-content" name="content" class="rich-editor" placeholder="Write your announcement content here..." required></textarea>
                        </div>
                        
                        <div class="form-group full-width">
                            <label>Attachments</label>
                            <div class="file-upload" onclick="document.getElementById('file-input').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Click to upload files or drag and drop</p>
                                <small>Supports images, documents, and videos</small>
                            </div>
                            <input type="file" id="file-input" multiple style="display: none;">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('new-announcement-modal')">Cancel</button>
                        <button type="button" class="btn-outline" onclick="saveDraft()">Save Draft</button>
                        <button type="submit" class="btn-primary">Publish Announcement</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Announcement Modal -->
    <div id="edit-announcement-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Edit Announcement</h3>
                <button class="close" onclick="closeModal('edit-announcement-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-announcement-form">
                    <!-- Same form structure as create modal -->
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('edit-announcement-modal')">Cancel</button>
                        <button type="button" class="btn-outline" onclick="deleteAnnouncement()">Delete</button>
                        <button type="submit" class="btn-primary">Update Announcement</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        // Enhanced Announcements JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            initializeAnnouncements();
            loadAnnouncements();
            setupEventListeners();
        });

        // Sample data
        let announcements = [
            {
                id: 1,
                title: "Training Session Tomorrow - Tactical Focus",
                content: "Tomorrow's training session will focus on tactical positioning and set pieces. Please arrive 30 minutes early for warm-up. Bring your tactical notebooks.",
                category: "training",
                priority: "high",
                audience: "all",
                publishDate: "2024-01-15T08:00:00",
                expiryDate: "2024-01-16T18:00:00",
                status: "active",
                views: 25,
                author: "Ahmed Hassan",
                createdAt: "2024-01-15T08:00:00"
            },
            {
                id: 2,
                title: "Match Against Zamalek - Team Selection",
                content: "The starting eleven for tomorrow's match against Zamalek has been finalized. Check your individual messages for specific instructions.",
                category: "match",
                priority: "high",
                audience: "all",
                publishDate: "2024-01-14T15:00:00",
                expiryDate: "2024-01-17T23:59:59",
                status: "active",
                views: 25,
                author: "Ahmed Hassan",
                createdAt: "2024-01-14T15:00:00"
            },
            {
                id: 3,
                title: "New Training Equipment Available",
                content: "We have received new training equipment including GPS vests and heart rate monitors. Equipment manager will distribute them during tomorrow's session.",
                category: "general",
                priority: "medium",
                audience: "all",
                publishDate: "2024-01-13T10:00:00",
                expiryDate: "2024-01-20T23:59:59",
                status: "active",
                views: 18,
                author: "Ahmed Hassan",
                createdAt: "2024-01-13T10:00:00"
            },
            {
                id: 4,
                title: "Medical Check-ups Scheduled",
                content: "Mandatory medical check-ups are scheduled for all players next week. Please coordinate with the medical team for your appointment.",
                category: "general",
                priority: "medium",
                audience: "all",
                publishDate: "2024-01-12T09:00:00",
                expiryDate: "2024-01-25T23:59:59",
                status: "active",
                views: 22,
                author: "Ahmed Hassan",
                createdAt: "2024-01-12T09:00:00"
            },
            {
                id: 5,
                title: "Defenders Special Training Session",
                content: "Special defensive training session focusing on aerial duels and positioning. Mandatory for all defenders.",
                category: "training",
                priority: "medium",
                audience: "defenders",
                publishDate: "2024-01-18T16:00:00",
                expiryDate: "2024-01-19T12:00:00",
                status: "scheduled",
                views: 0,
                author: "Ahmed Hassan",
                createdAt: "2024-01-15T14:00:00"
            }
        ];

        function initializeAnnouncements() {
            // Load announcements from localStorage if available
            const savedAnnouncements = localStorage.getItem('coach_announcements');
            if (savedAnnouncements) {
                announcements = JSON.parse(savedAnnouncements);
            }
            updateStats();
        }

        function loadAnnouncements() {
            const grid = document.getElementById('announcements-grid');
            const filteredAnnouncements = filterAnnouncements();
            
            if (filteredAnnouncements.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bullhorn"></i>
                        <h3>No announcements found</h3>
                        <p>Create your first announcement to get started</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredAnnouncements.map(announcement => `
                <div class="announcement-card priority-${announcement.priority}" data-id="${announcement.id}">
                    <div class="announcement-header">
                        <div class="announcement-meta">
                            <span class="announcement-category category-${announcement.category}">
                                <i class="fas fa-${getCategoryIcon(announcement.category)}"></i>
                                ${announcement.category}
                            </span>
                            <div class="announcement-priority priority-${announcement.priority}">
                                <i class="fas fa-${getPriorityIcon(announcement.priority)}"></i>
                                ${announcement.priority}
                            </div>
                        </div>
                        <h3 class="announcement-title">${announcement.title}</h3>
                        <p class="announcement-excerpt">${truncateText(announcement.content, 120)}</p>
                    </div>
                    <div class="announcement-footer">
                        <div class="announcement-info">
                            <span><i class="fas fa-user"></i> ${announcement.author}</span>
                            <span><i class="fas fa-calendar"></i> ${formatDate(announcement.createdAt)}</span>
                            <span><i class="fas fa-eye"></i> ${announcement.views} views</span>
                            <span class="status-${announcement.status}"><i class="fas fa-circle"></i> ${announcement.status}</span>
                        </div>
                        <div class="announcement-actions">
                            <button class="action-btn" onclick="viewAnnouncement(${announcement.id})" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editAnnouncement(${announcement.id})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="duplicateAnnouncement(${announcement.id})" title="Duplicate">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="action-btn" onclick="deleteAnnouncement(${announcement.id})" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterAnnouncements() {
            const categoryFilter = document.getElementById('category-filter').value;
            const priorityFilter = document.getElementById('priority-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const searchTerm = document.getElementById('search-input').value.toLowerCase();

            return announcements.filter(announcement => {
                const matchesCategory = !categoryFilter || announcement.category === categoryFilter;
                const matchesPriority = !priorityFilter || announcement.priority === priorityFilter;
                const matchesStatus = !statusFilter || announcement.status === statusFilter;
                const matchesSearch = !searchTerm || 
                    announcement.title.toLowerCase().includes(searchTerm) ||
                    announcement.content.toLowerCase().includes(searchTerm);

                return matchesCategory && matchesPriority && matchesStatus && matchesSearch;
            });
        }

        function setupEventListeners() {
            // Filter change listeners
            document.getElementById('category-filter').addEventListener('change', loadAnnouncements);
            document.getElementById('priority-filter').addEventListener('change', loadAnnouncements);
            document.getElementById('status-filter').addEventListener('change', loadAnnouncements);
            document.getElementById('search-input').addEventListener('input', loadAnnouncements);

            // Form submission
            document.getElementById('announcement-form').addEventListener('submit', function(e) {
                e.preventDefault();
                createAnnouncement();
            });

            // File upload
            const fileInput = document.getElementById('file-input');
            const fileUpload = document.querySelector('.file-upload');
            
            fileInput.addEventListener('change', handleFileUpload);
            fileUpload.addEventListener('dragover', handleDragOver);
            fileUpload.addEventListener('drop', handleFileDrop);
        }

        function createAnnouncement() {
            const form = document.getElementById('announcement-form');
            const formData = new FormData(form);
            
            const newAnnouncement = {
                id: Date.now(),
                title: formData.get('title'),
                content: formData.get('content'),
                category: formData.get('category'),
                priority: formData.get('priority'),
                audience: formData.get('audience'),
                publishDate: formData.get('publishDate') || new Date().toISOString(),
                expiryDate: formData.get('expiryDate'),
                status: formData.get('publishDate') && new Date(formData.get('publishDate')) > new Date() ? 'scheduled' : 'active',
                views: 0,
                author: 'Ahmed Hassan',
                createdAt: new Date().toISOString()
            };

            announcements.unshift(newAnnouncement);
            saveAnnouncements();
            loadAnnouncements();
            updateStats();
            closeModal('new-announcement-modal');
            form.reset();
            
            showNotification('Announcement created successfully!', 'success');
        }

        function editAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (!announcement) return;

            // Populate edit form with announcement data
            // This would open the edit modal with pre-filled data
            showNotification('Edit functionality would open here', 'info');
        }

        function viewAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (!announcement) return;

            // Increment view count
            announcement.views++;
            saveAnnouncements();
            loadAnnouncements();
            updateStats();

            // Show announcement details in modal or navigate to detail page
            showNotification('Announcement viewed', 'info');
        }

        function duplicateAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (!announcement) return;

            const duplicate = {
                ...announcement,
                id: Date.now(),
                title: announcement.title + ' (Copy)',
                views: 0,
                createdAt: new Date().toISOString(),
                status: 'active'
            };

            announcements.unshift(duplicate);
            saveAnnouncements();
            loadAnnouncements();
            updateStats();
            
            showNotification('Announcement duplicated successfully!', 'success');
        }

        function deleteAnnouncement(id) {
            if (!confirm('Are you sure you want to delete this announcement?')) return;

            announcements = announcements.filter(a => a.id !== id);
            saveAnnouncements();
            loadAnnouncements();
            updateStats();
            
            showNotification('Announcement deleted successfully!', 'success');
        }

        function saveDraft() {
            showNotification('Draft saved successfully!', 'success');
        }

        function exportAnnouncements() {
            const dataStr = JSON.stringify(announcements, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'announcements_export.json';
            link.click();
            
            showNotification('Announcements exported successfully!', 'success');
        }

        function saveAnnouncements() {
            localStorage.setItem('coach_announcements', JSON.stringify(announcements));
        }

        function updateStats() {
            const totalCount = announcements.length;
            const activeCount = announcements.filter(a => a.status === 'active').length;
            const scheduledCount = announcements.filter(a => a.status === 'scheduled').length;
            const totalViews = announcements.reduce((sum, a) => sum + a.views, 0);

            // Update stat cards
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards.length >= 4) {
                statCards[0].querySelector('h3').textContent = totalCount;
                statCards[1].querySelector('h3').textContent = activeCount;
                statCards[2].querySelector('h3').textContent = scheduledCount;
                statCards[3].querySelector('h3').textContent = totalViews.toLocaleString();
            }
        }

        function getCategoryIcon(category) {
            const icons = {
                training: 'dumbbell',
                match: 'futbol',
                general: 'info-circle',
                emergency: 'exclamation-triangle'
            };
            return icons[category] || 'bullhorn';
        }

        function getPriorityIcon(priority) {
            const icons = {
                high: 'exclamation-circle',
                medium: 'minus-circle',
                low: 'info-circle'
            };
            return icons[priority] || 'circle';
        }

        function truncateText(text, maxLength) {
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function handleFileUpload(event) {
            const files = event.target.files;
            handleFiles(files);
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleFileDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            const files = event.dataTransfer.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            // Handle file upload logic here
            showNotification(`${files.length} file(s) uploaded successfully!`, 'success');
        }
    </script>
</body>
</html>

